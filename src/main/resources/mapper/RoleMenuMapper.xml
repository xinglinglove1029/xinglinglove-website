<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xingling.mapper.RoleMenuMapper" >
  <resultMap id="BaseResultMap" type="com.xingling.model.domain.RoleMenu" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="role_id" property="roleId" jdbcType="VARCHAR" />
    <id column="menu_id" property="menuId" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    role_id, menu_id
  </sql>
    <delete id="batchDeleteByRoleId">
      DELETE FROM xl_role_menu where role_id = #{roleId}
    </delete>
  <select id="getMenuByRoleIds" resultType="com.xingling.model.domain.Menu">
    SELECT DISTINCT aa.menu_id as id,bb.menu_name as menuName,bb.menu_code as menuCode,  bb.url, bb.icon, bb.pid, bb.level, bb.leaf, bb.number
    from xl_role_menu aa JOIN xl_menu bb on aa.menu_id = bb.id AND bb.del = 0 and bb.status =1
    where  1=1
    <if test="roleIds != null and roleIds.size() > 0 ">
      AND aa.role_id IN
      <foreach collection="roleIds" item="item" index="index" open="(" separator="," close=")">
        #{item}
      </foreach>
    </if>
    ORDER BY bb.number ASC,bb.`level` ASC
  </select>
  <select id="selectRoleMenuByRoleId" resultType="com.xingling.model.domain.RoleMenu">
    select <include refid="Base_Column_List"/> from  xl_role_menu aa JOIN xl_menu bb on aa.menu_id = bb.id AND bb.del = 0 and bb.status =1 and aa.role_id =#{roleId}
  </select>
</mapper>