<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xingling.mapper.RoleAuthorityMapper" >
  <resultMap id="BaseResultMap" type="com.xingling.model.domain.RoleAuthority" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="role_id" property="roleId" jdbcType="VARCHAR" />
    <id column="authority_id" property="authorityId" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >role_id, authority_id</sql>
    <delete id="batchDeleteByRoleId">
      DELETE FROM xl_role_authority where role_id = #{roleId}
    </delete>

    <select id="getAuthorityByRoleIds" resultType="com.xingling.model.domain.Authority">
     select <include refid="Base_Column_List"/> from  xl_role_authority aa JOIN xl_authority bb on aa.authority_id = bb.id AND bb.del = 0 and bb.status =1
      where  1=1
      <if test="roleIds != null and roleIds.size() > 0 ">
        AND aa.role_id IN
        <foreach collection="roleIds" item="item" index="index" open="(" separator="," close=")">
          #{item}
        </foreach>
      </if>
    </select>
    <select id="selectRoleAuthorityByRoleId" resultType="com.xingling.model.domain.RoleAuthority">
        select <include refid="Base_Column_List"/> from  xl_role_authority aa JOIN xl_authority bb on aa.authority_id = bb.id AND bb.del = 0  and bb.status =1 and  aa.role_id = #{roleId}
    </select>
</mapper>